<!DOCTYPE HTML>
<html lang="es-CL">
    <head>
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140369062-1"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-140369062-1');
      </script>
      <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-M5LWCHD');
      </script>
        <!-- End Google Tag Manager -->
<!-- En verdad, lamento la cantidad horrorosa de divs -->
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Malla interativa: prioridad</title>
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.css">    
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
        <script 
        defer
        src="https://use.fontawesome.com/releases/v5.8.2/js/all.js"
        integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" 
        crossorigin="anonymous">
        </script>

        <link rel="stylesheet" href="/css/styles.css">

    </head>
    <style>
		body {
			display: inline;
			/* text-align: center; */
			justify-content:center;
		}
		html {
			font-family: sans-serif;
		}

		.info {
			font-size: 30px;
		}

  </style>  

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M5LWCHD"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
  <!-- End Google Tag Manager (noscript) -->


<!-- Agregar ramo personalizado -->
<div class="modal fade"
id="crearRamoModal" 
tabindex="-1" 
role="dialog" 
aria-labelledby="crearRamo" 
aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="crearRamo">Añadir ramo fuera de la malla</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="newRamo">Nombre asignatura</label>
                <input type="text"
                class="form-control" 
                id="custom-name" 
                placeholder="Introducción a la malla interactiva">
              </div>
              <div class="form-group">
                  <label for="newRamo">Sigla asignatura</label>
                  <input type="text" class="form-control" id="custom-sigla" placeholder="INF-123">
                  <small id="sigla-Help" class="form-text text-muted">
                    Asegurate de que la sigla NO contenga espacios.
                  </small>
                </div>
                <div class="form-group">
                    <label for="newRamo">Creditos</label>
                    <input type="number" class="form-control" id="custom-credits" placeholder="1">
                  </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" id="crearRamo" onclick="crearRamo(true)" class="btn btn-primary">Agregar</button>
        </div>
      </div>
    </div>
  </div>
    <!-- fin ramo -->


    <nav class="navbar navbar-expand-md navbar-light bg-light">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mallaNavbar" aria-controls="mallaNavbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <h1 class="navbar-brand mb-0 d-md-none">Malla <span class="carrera"></span></h1>
      <div class="collapse navbar-collapse" id="mallaNavbar">
      <ul class="navbar navbar-nav">
        <li><a class="nav-item nav-link" href="?m=ICA"><span class="d-md-none">Malla </span>Ambiental</a></li>
        <li><a class="nav-item nav-link" href="?m=ARQ"><span class="d-md-none">Malla </span>Arquitectura</a></li>
        <li><a class="nav-item nav-link" href="?m=CIV"><span class="d-md-none">Malla </span>Civil</a></li>
        <li><a class="nav-item nav-link" href="?m=ICOM"><span class="d-md-none">Malla </span>Comercial</a></li>
        <li><a class="nav-item nav-link" href="?m=CONSTRU"><span class="d-md-none">Malla </span>Construcción</a></li>
        <li><a class="nav-item nav-link" href="?m=IDP"><span class="d-md-none">Malla </span>Diseño de productos</a></li>
        <li><a class="nav-item nav-link" href="?m=ELI"><span class="d-md-none">Malla </span>Eléctrica</a></li>
        <li><a class="nav-item nav-link" href="?m=ELO"><span class="d-md-none">Malla </span>Electrónica</a></li>
        <li><a class="nav-item nav-link" href="?m=INF"><span class="d-md-none">Malla </span>Informática</a></li>
        <li><a class="nav-item nav-link" href="?m=ICI"><span class="d-md-none">Malla </span>Industrial</a></li>
        <li><a class="nav-item nav-link" href="?m=MAT"><span class="d-md-none">Malla </span>Matemática</a></li>
        <li><a class="nav-item nav-link" href="?m=MEC"><span class="d-md-none">Malla </span>Mecánica</a></li>
        <li><a class="nav-item nav-link" href="?m=MET"><span class="d-md-none">Malla </span>Metalúrgica</a></li>
        <li><a class="nav-item nav-link" href="?m=ICQ"><span class="d-md-none">Malla </span>Química</a></li>
        <li><a class="nav-item nav-link" href="?m=TEL"><span class="d-md-none">Malla </span>Telemática</a></li>
      </ul>
      </div>
    </nav>

<h1 class="title text-center d-none d-md-block" >Malla <span id="carrera"></span></h1>
<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-xl-7 ">
      <div class='priori-canvas' style="text-align:center;overflow-x:auto"></div>		          
      <div class='color-description'
      style="position:relative;display:flex;justify-content:center;flex-wrap:wrap;">
      </div>
    </div>
        <div class="col-sm-auto">
          <!-- Inicio calculadora -->
          <form id="priorix" class="card mt-3">
              <h4 class="card-header text-center">Calculadora de prioridad</h4>
              <div class="container my-0 py-2">
                <div class="row justify-content-between mb-2">
                  <div class="col-1"><div class="badge badge-info text-left">
                    Semestre Nº <span id="semestre"></span>
                  </div></div>
                  <div class="col-sm-4 col-6 text-right">
                    <div class="input-group input-group-sm">
                      <div class="input-group-prepend">
                        <span class="input-group-text">FAE: </span>
                      </div>
                      <input id="fae" type="number" class="form-control" value="1">
                    </div>
                  </div>
                </div>
                <div class="row justify-content-center">
                  <div class="col text-center" id="resPrioridad">
                      <!-- <div class="alert alert-info mb-0" role="alert">
                          <h4>Tu prioridad de <em>S2</em> es: <br> <strong>8723.23</strong></h4>
                      </div> -->
                    <!-- Alerta que informa prioridad -->
                    </div>
                  </div>
                </div>
                <hr class="my-0 py-0">
                
              <div class="card-body" style="overflow-y: auto" >
                <span id="ramos">
                <!-- Aqui van los ramos seleccionados -->
                </span>
              </div>
              <hr class="my-0 py-0">
              <p class="container mb-0 text-center"><small class=" text-muted">
                ¿El ramo que quieres no esta en la malla? ¡Crealo en la tabla de abajo!
              </small></p>
                <div class="card-footer container px-3">
                    <!-- <div class="container"> -->
                <!-- Botones para cambiar semestre y calcular prioridad -->
                <div class="row no-gutters align-items-center justify-content-center">
                  <div class="col-2 text-left">
                      <button id="back" onclick="semestreAnterior()" type="button" class="btn-card btn btn-secondary">
                        <i class="fas fa-arrow-left"></i>
                      </button>
                  </div>
                  <div class="col-8 col-sm-5 container">
                    <div class="row justify-content-center no-gutters">
                      <div class="btn-group" role="group">
                        <button
                          type="button"
                          id="Calcular"
                          onclick="calcularPrioridad()"
                          class="btn btn-info btn-card">
                            Calcular
                        </button>
                        <button type="reset" onclick="limpiarSemestre()" class="btn btn-danger btn-card">
                          Limpiar Semestre
                        </button>
                      </div>
                    </div>
                    <div class="row justify-content-center">
                      <button id="resetc" onclick="limpiarCalculadora()" type="button" class="btn btn-danger btn-card mt-1">
                        Restablecer Calculadora
                      </button>
                    </div>
                  </div>
                  <div class="col-2 text-right">
                    <button id="forward" onclick="proximoSemestre()" type="button" class="btn btn-secondary btn-card">
                      <i class="fas fa-arrow-right"></i>
                    </button>
                  </div>
                  </div>
                <!-- </div> -->
                <!-- Fin botones -->
                </div>
              </div>
              </form>
            <!-- Fin calculadora -->
        </div>
        <div class="row justify-content-center mt-5">
          <div class="col-lg-auto">
            <div class="card">
              <div  class="card-header">
                <h3 class="card-title">Ramos fuera de malla</h3>
              </div>
              <div class="table-responsive">
              <table id="customTable" class="card-body table table-hover">
                <thead>
                  <tr>
                    <th scope="col">Sigla</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Creditos</th>
                    <th scope="col">Estado</th>
                    <th scope="col">Acciones</th>
                  </tr>
                </thead>
                <tbody id="customTableContent">
                  <!-- Aqui van los ramos fuera de malla -->
                </tbody>
              </table>
              </div>
              <div class="card-footer">
                <button 
                type="button" 
                data-toggle="modal" 
                data-target="#crearRamoModal"  
                class="btn btn-primary btn-sm">
                  Crear ramo
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-lg-4">
            <p class="text-center mt-2"><a href="../" class="btn btn-primary">Volver</a></p>
            <p class="text-center"><img src="../data/ramo.svg" style="width:300px;"></p>
            
            <p class="text-center">
              Hecho con el ❤️ por amor al arte.
              <a href="http://github.com/etra0/ramos">Código fuente</a>
            </p>
            <p class="text-center"><a href="mailto:saedo@alumnos.inf.utfsm.cl">
              Contacto
            </a></p>
          </div>
        </div>
      </div>
    </div>


    <script src='../d3.js'></script>
    <script src='../ramos.js'></script>
    <script src='./selectableRamo.js'></script>
    <script src="./calculator.js"></script>
    <script src='../canvas.js'></script>
    <script>
        var mediaQueryList = window.matchMedia("(max-width: 575.98px)");
        if (mediaQueryList.matches) {
                d3.select('.btn-group')
                .classed('btn-group-sm', true)
                // .classed('btn-group-vertical', true)
                // .classed('btn-group', false);
                d3.select('#resetc').classed('btn-sm', true)
            }
        function handleOrientationChange(mql) {
            if (mql.matches) {
                d3.select('.btn-group')
                .classed('btn-group-sm', true)
                // .classed('btn-group-vertical', true)
                // .classed('btn-group', false);
                d3.select('#resetc').classed('btn-sm', true)
            } else {
                d3.select('.btn-group')
                .classed('btn-group-sm', false)
                // .classed('btn-group-vertical', false)
                // .classed('btn-group', true);
                d3.select('#resetc').classed('btn-sm', false)
            }
        }
        mediaQueryList.addListener(handleOrientationChange)
        handleOrientationChange(mediaQueryList);
        </script>
  </body>
</html>
